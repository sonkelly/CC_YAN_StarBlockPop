
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/Script/MenuUI.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '5c2b5VzgPNHI4Chk6xcuhIS', 'MenuUI');
// Script/MenuUI.js

"use strict";

var GameTools = require("GameTools");

var GameUiTools = require("GameUiTools");

var GameConfig = require("GameConfig");

var GameData = require("GameData");

var AnimLayerTool = require("AnimLayerTool");

cc.Class({
  "extends": cc.Component,
  properties: {
    layerBack: cc.Node,
    startGameButton: cc.Node,
    musicButton: cc.Node,
    bestScoreLabel: cc.Label,
    gameIntegral: cc.Label,
    rankButton: cc.Node,
    //排行榜按钮
    shareButton: cc.Node,
    //好友分享按钮
    shareButton2: cc.Node,
    //群分享按钮
    helpButton: cc.Node //帮助按钮

  },
  onLoad: function onLoad() {
    GameUiTools.setButtonClickEvents(this, this.startGameButton, "startGameButtonFunc");
    GameUiTools.setButtonClickEvents(this, this.musicButton, "musicButtonFunc");
    GameUiTools.setButtonClickEvents(this, this.rankButton, "rankButtonFunc");
    GameUiTools.setButtonClickEvents(this, this.shareButton, "shareButtonFunc");
    GameUiTools.setButtonClickEvents(this, this.shareButton2, "shareButtonFunc");
    GameUiTools.setButtonClickEvents(this, this.helpButton, "helpButtonFunc");

    if (!GameConfig.IS_GAME_MUSIC) {
      GameUiTools.getSpriteFrame("pop_main/popmain_78", this.musicButton.getComponent(cc.Sprite));
    }

    this.bestScoreLabel.string = GameData.getHeightScore();
    this.gameIntegral.string = GameTools.getGameIntegral();
  },
  start: function start() {
    if (CC_WECHATGAME) {
      if (GameConfig.GameClubButton != null) {
        GameConfig.GameClubButton.show();
      }
    }
  },
  startGameButtonFunc: function startGameButtonFunc(event, customEventData) {
    GameTools.playSimpleAudioEngine(0);
    this.loadingResource();
  },
  musicButtonFunc: function musicButtonFunc() {
    GameTools.playSimpleAudioEngine(0);
    GameConfig.IS_GAME_MUSIC = !GameConfig.IS_GAME_MUSIC;
    GameTools.setItemByLocalStorage("IS_GAME_MUSIC", GameConfig.IS_GAME_MUSIC);

    if (GameConfig.IS_GAME_MUSIC) {
      GameUiTools.getSpriteFrame("pop_main/popmain_58", this.musicButton.getComponent(cc.Sprite));
    } else {
      GameUiTools.getSpriteFrame("pop_main/popmain_78", this.musicButton.getComponent(cc.Sprite));
    }
  },
  //特价9.9元一套cocoscreator代码联系Q2483367084 
  //截图 链接：https://share.weiyun.com/leGAHpnB 密码：b9udtv
  rankButtonFunc: function rankButtonFunc(event) {
    GameTools.playSimpleAudioEngine(0);
    GameTools.getRankData();
  },
  shareButtonFunc: function shareButtonFunc(event) {
    GameTools.playSimpleAudioEngine(0);
    setTimeout(function () {
      GameTools.sharePicture();
    }, 100);
  },
  helpButtonFunc: function helpButtonFunc(event) {
    GameTools.playSimpleAudioEngine(0);
    GameUiTools.loadingLayer("panel/GameHelp");
  },
  loadingResource: function loadingResource() {
    // cc.director.loadScene('GameScene');
    GameConfig.CAED_LINES = 10;
    GameConfig.MAIN_MENU_NUM = 11;
    GameConfig.mainMenu = GameConfig.MainMenu.MainMenuNumPopStar;
    GameConfig.CARD_WIDTH = (GameConfig.DEVICE_WIDTH - GameConfig.DEVICE_WIDTH / 10.0) / GameConfig.CAED_LINES;
    GameConfig.loadingSceneType = GameConfig.LoadingSceneType.LoadingSceneEnterGame;
    cc.director.loadScene('LoadingScene');
  },
  onDestroy: function onDestroy() {
    if (CC_WECHATGAME) {
      if (GameConfig.GameClubButton != null) {
        GameConfig.GameClubButton.hide();
      }
    }
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcU2NyaXB0XFxNZW51VUkuanMiXSwibmFtZXMiOlsiR2FtZVRvb2xzIiwicmVxdWlyZSIsIkdhbWVVaVRvb2xzIiwiR2FtZUNvbmZpZyIsIkdhbWVEYXRhIiwiQW5pbUxheWVyVG9vbCIsImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwibGF5ZXJCYWNrIiwiTm9kZSIsInN0YXJ0R2FtZUJ1dHRvbiIsIm11c2ljQnV0dG9uIiwiYmVzdFNjb3JlTGFiZWwiLCJMYWJlbCIsImdhbWVJbnRlZ3JhbCIsInJhbmtCdXR0b24iLCJzaGFyZUJ1dHRvbiIsInNoYXJlQnV0dG9uMiIsImhlbHBCdXR0b24iLCJvbkxvYWQiLCJzZXRCdXR0b25DbGlja0V2ZW50cyIsIklTX0dBTUVfTVVTSUMiLCJnZXRTcHJpdGVGcmFtZSIsImdldENvbXBvbmVudCIsIlNwcml0ZSIsInN0cmluZyIsImdldEhlaWdodFNjb3JlIiwiZ2V0R2FtZUludGVncmFsIiwic3RhcnQiLCJDQ19XRUNIQVRHQU1FIiwiR2FtZUNsdWJCdXR0b24iLCJzaG93Iiwic3RhcnRHYW1lQnV0dG9uRnVuYyIsImV2ZW50IiwiY3VzdG9tRXZlbnREYXRhIiwicGxheVNpbXBsZUF1ZGlvRW5naW5lIiwibG9hZGluZ1Jlc291cmNlIiwibXVzaWNCdXR0b25GdW5jIiwic2V0SXRlbUJ5TG9jYWxTdG9yYWdlIiwicmFua0J1dHRvbkZ1bmMiLCJnZXRSYW5rRGF0YSIsInNoYXJlQnV0dG9uRnVuYyIsInNldFRpbWVvdXQiLCJzaGFyZVBpY3R1cmUiLCJoZWxwQnV0dG9uRnVuYyIsImxvYWRpbmdMYXllciIsIkNBRURfTElORVMiLCJNQUlOX01FTlVfTlVNIiwibWFpbk1lbnUiLCJNYWluTWVudSIsIk1haW5NZW51TnVtUG9wU3RhciIsIkNBUkRfV0lEVEgiLCJERVZJQ0VfV0lEVEgiLCJsb2FkaW5nU2NlbmVUeXBlIiwiTG9hZGluZ1NjZW5lVHlwZSIsIkxvYWRpbmdTY2VuZUVudGVy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WUFBWixDQUF5QixnQkFBekI7QUFDSCxHQXBFSTtBQXNFTFQsRUFBQUEsZUFBZSxFQUFFLDJCQUFZO0FBQ3pCO0FBQ0FuQyxJQUFBQSxVQUFVLENBQUM2QyxVQUFYLEdBQXdCLEVBQXhCO0FBQ0E3QyxJQUFBQSxVQUFVLENBQUM4QyxhQUFYLEdBQTJCLEVBQTNCO0FBQ0E5QyxJQUFBQSxVQUFVLENBQUMrQyxRQUFYLEdBQXNCL0MsVUFBVSxDQUFDZ0QsUUFBWCxDQUFvQkMsa0JBQTFDO0FBQ0FqRCxJQUFBQSxVQUFVLENBQUNrRCxVQUFYLEdBQXdCLENBQUNsRCxVQUFVLENBQUNtRCxZQUFYLEdBQTBCbkQsVUFBVSxDQUFDbUQsWUFBWCxHQUEwQixJQUFyRCxJQUE2RG5ELFVBQVUsQ0FBQzZDLFVBQWhHO0FBQ0E3QyxJQUFBQSxVQUFVLENBQUNvRCxnQkFBWCxHQUE4QnBELFVBQVUsQ0FBQ3FELGdCQUFYLENBQTRCQyxxQkFBMUQ7QUFDQW5ELElBQUFBLEVBQUUsQ0FBQ29ELFFBQUgsQ0FBWUMsU0FBWixDQUFzQixjQUF0QjtBQUNILEdBOUVJO0FBZ0ZMQyxFQUFBQSxTQWhGSyx1QkFnRk87QUFDUixRQUFJN0IsYUFBSixFQUFtQjtBQUNmLFVBQUk1QixVQUFVLENBQUM2QixjQUFYLElBQTZCLElBQWpDLEVBQXVDO0FBQ25DN0IsUUFBQUEsVUFBVSxDQUFDNkIsY0FBWCxDQUEwQjZCLElBQTFCO0FBQ0g7QUFDSjtBQUNKO0FBdEZJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBHYW1lVG9vbHMgPSByZXF1aXJlKFwiR2FtZVRvb2xzXCIpO1xudmFyIEdhbWVVaVRvb2xzID0gcmVxdWlyZShcIkdhbWVVaVRvb2xzXCIpO1xudmFyIEdhbWVDb25maWcgPSByZXF1aXJlKFwiR2FtZUNvbmZpZ1wiKTtcbnZhciBHYW1lRGF0YSA9IHJlcXVpcmUoXCJHYW1lRGF0YVwiKTtcbnZhciBBbmltTGF5ZXJUb29sID0gcmVxdWlyZShcIkFuaW1MYXllclRvb2xcIik7XG5jYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge1xuICAgICAgICBsYXllckJhY2s6IGNjLk5vZGUsXG4gICAgICAgIHN0YXJ0R2FtZUJ1dHRvbjogY2MuTm9kZSxcbiAgICAgICAgbXVzaWNCdXR0b246IGNjLk5vZGUsXG4gICAgICAgIGJlc3RTY29yZUxhYmVsOiBjYy5MYWJlbCxcbiAgICAgICAgZ2FtZUludGVncmFsOiBjYy5MYWJlbCxcbiAgICAgICAgcmFua0J1dHRvbjogY2MuTm9kZSwgLy/mjpLooYzmppzmjInpkq5cbiAgICAgICAgc2hhcmVCdXR0b246IGNjLk5vZGUsIC8v5aW95Y+L5YiG5Lqr5oyJ6ZKuXG4gICAgICAgIHNoYXJlQnV0dG9uMjogY2MuTm9kZSwgLy/nvqTliIbkuqvmjInpkq5cbiAgICAgICAgaGVscEJ1dHRvbjogY2MuTm9kZSwgLy/luK7liqnmjInpkq5cbiAgICB9LFxuXG4gICAgb25Mb2FkKCkge1xuICAgICAgICBHYW1lVWlUb29scy5zZXRCdXR0b25DbGlja0V2ZW50cyh0aGlzLCB0aGlzLnN0YXJ0R2FtZUJ1dHRvbiwgXCJzdGFydEdhbWVCdXR0b25GdW5jXCIpO1xuICAgICAgICBHYW1lVWlUb29scy5zZXRCdXR0b25DbGlja0V2ZW50cyh0aGlzLCB0aGlzLm11c2ljQnV0dG9uLCBcIm11c2ljQnV0dG9uRnVuY1wiKTtcbiAgICAgICAgR2FtZVVpVG9vbHMuc2V0QnV0dG9uQ2xpY2tFdmVudHModGhpcywgdGhpcy5yYW5rQnV0dG9uLCBcInJhbmtCdXR0b25GdW5jXCIpO1xuICAgICAgICBHYW1lVWlUb29scy5zZXRCdXR0b25DbGlja0V2ZW50cyh0aGlzLCB0aGlzLnNoYXJlQnV0dG9uLCBcInNoYXJlQnV0dG9uRnVuY1wiKTtcbiAgICAgICAgR2FtZVVpVG9vbHMuc2V0QnV0dG9uQ2xpY2tFdmVudHModGhpcywgdGhpcy5zaGFyZUJ1dHRvbjIsIFwic2hhcmVCdXR0b25GdW5jXCIpO1xuICAgICAgICBHYW1lVWlUb29scy5zZXRCdXR0b25DbGlja0V2ZW50cyh0aGlzLCB0aGlzLmhlbHBCdXR0b24sIFwiaGVscEJ1dHRvbkZ1bmNcIik7XG4gICAgICAgIGlmICghR2FtZUNvbmZpZy5JU19HQU1FX01VU0lDKSB7XG4gICAgICAgICAgICBHYW1lVWlUb29scy5nZXRTcHJpdGVGcmFtZShcInBvcF9tYWluL3BvcG1haW5fNzhcIiwgdGhpcy5tdXNpY0J1dHRvbi5nZXRDb21wb25lbnQoY2MuU3ByaXRlKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iZXN0U2NvcmVMYWJlbC5zdHJpbmcgPSBHYW1lRGF0YS5nZXRIZWlnaHRTY29yZSgpO1xuICAgICAgICB0aGlzLmdhbWVJbnRlZ3JhbC5zdHJpbmcgPSBHYW1lVG9vbHMuZ2V0R2FtZUludGVncmFsKCk7XG4gICAgfSxcblxuICAgIHN0YXJ0KCkge1xuICAgICAgICBpZiAoQ0NfV0VDSEFUR0FNRSkge1xuICAgICAgICAgICAgaWYgKEdhbWVDb25maWcuR2FtZUNsdWJCdXR0b24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIEdhbWVDb25maWcuR2FtZUNsdWJCdXR0b24uc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIHN0YXJ0R2FtZUJ1dHRvbkZ1bmM6IGZ1bmN0aW9uIChldmVudCwgY3VzdG9tRXZlbnREYXRhKSB7XG4gICAgICAgIEdhbWVUb29scy5wbGF5U2ltcGxlQXVkaW9FbmdpbmUoMCk7XG4gICAgICAgIHRoaXMubG9hZGluZ1Jlc291cmNlKCk7XG4gICAgfSxcblxuICAgIG11c2ljQnV0dG9uRnVuYzogZnVuY3Rpb24gKCkge1xuICAgICAgICBHYW1lVG9vbHMucGxheVNpbXBsZUF1ZGlvRW5naW5lKDApO1xuICAgICAgICBHYW1lQ29uZmlnLklTX0dBTUVfTVVTSUMgPSAhR2FtZUNvbmZpZy5JU19HQU1FX01VU0lDO1xuICAgICAgICBHYW1lVG9vbHMuc2V0SXRlbUJ5TG9jYWxTdG9yYWdlKFwiSVNfR0FNRV9NVVNJQ1wiLCBHYW1lQ29uZmlnLklTX0dBTUVfTVVTSUMpO1xuICAgICAgICBpZiAoR2FtZUNvbmZpZy5JU19HQU1FX01VU0lDKSB7XG4gICAgICAgICAgICBHYW1lVWlUb29scy5nZXRTcHJpdGVGcmFtZShcInBvcF9tYWluL3BvcG1haW5fNThcIiwgdGhpcy5tdXNpY0J1dHRvbi5nZXRDb21wb25lbnQoY2MuU3ByaXRlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBHYW1lVWlUb29scy5nZXRTcHJpdGVGcmFtZShcInBvcF9tYWluL3BvcG1haW5fNzhcIiwgdGhpcy5tdXNpY0J1dHRvbi5nZXRDb21wb25lbnQoY2MuU3ByaXRlKSk7XG4gICAgICAgIH1cbiAgICB9LFxuLy/nibnku7c5LjnlhYPkuIDlpZdjb2Nvc2NyZWF0b3Lku6PnoIHogZTns7tRMjQ4MzM2NzA4NCBcbi8v5oiq5Zu+IOmTvuaOpe+8mmh0dHBzOi8vc2hhcmUud2VpeXVuLmNvbS9sZUdBSHBuQiDlr4bnoIHvvJpiOXVkdHZcbiAgICByYW5rQnV0dG9uRnVuYzogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIEdhbWVUb29scy5wbGF5U2ltcGxlQXVkaW9FbmdpbmUoMCk7XG4gICAgICAgIEdhbWVUb29scy5nZXRSYW5rRGF0YSgpO1xuICAgIH0sXG5cbiAgICBzaGFyZUJ1dHRvbkZ1bmM6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBHYW1lVG9vbHMucGxheVNpbXBsZUF1ZGlvRW5naW5lKDApO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIEdhbWVUb29scy5zaGFyZVBpY3R1cmUoKTtcbiAgICAgICAgfSwgMTAwKTtcbiAgICB9LFxuICAgIGhlbHBCdXR0b25GdW5jOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgR2FtZVRvb2xzLnBsYXlTaW1wbGVBdWRpb0VuZ2luZSgwKTtcbiAgICAgICAgR2FtZVVpVG9vbHMubG9hZGluZ0xheWVyKFwicGFuZWwvR2FtZUhlbHBcIik7XG4gICAgfSxcblxuICAgIGxvYWRpbmdSZXNvdXJjZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoJ0dhbWVTY2VuZScpO1xuICAgICAgICBHYW1lQ29uZmlnLkNBRURfTElORVMgPSAxMDtcbiAgICAgICAgR2FtZUNvbmZpZy5NQUlOX01FTlVfTlVNID0gMTE7XG4gICAgICAgIEdhbWVDb25maWcubWFpbk1lbnUgPSBHYW1lQ29uZmlnLk1haW5NZW51Lk1haW5NZW51TnVtUG9wU3RhcjtcbiAgICAgICAgR2FtZUNvbmZpZy5DQVJEX1dJRFRIID0gKEdhbWVDb25maWcuREVWSUNFX1dJRFRIIC0gR2FtZUNvbmZpZy5ERVZJQ0VfV0lEVEggLyAxMC4wKSAvIEdhbWVDb25maWcuQ0FFRF9MSU5FUztcbiAgICAgICAgR2FtZUNvbmZpZy5sb2FkaW5nU2NlbmVUeXBlID0gR2FtZUNvbmZpZy5Mb2FkaW5nU2NlbmVUeXBlLkxvYWRpbmdTY2VuZUVudGVyR2FtZTtcbiAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKCdMb2FkaW5nU2NlbmUnKTtcbiAgICB9LFxuXG4gICAgb25EZXN0cm95KCkge1xuICAgICAgICBpZiAoQ0NfV0VDSEFUR0FNRSkge1xuICAgICAgICAgICAgaWYgKEdhbWVDb25maWcuR2FtZUNsdWJCdXR0b24gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIEdhbWVDb25maWcuR2FtZUNsdWJCdXR0b24uaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSk7XG4iXX0=