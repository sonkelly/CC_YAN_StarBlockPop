{"version":3,"sources":["assets\\Script\\panel\\RankingListView.js"],"names":["GameConfig","require","AnimLayerTool","GameTools","GameUiTools","cc","Class","Component","properties","backButton","Node","rankingScrollView","Sprite","shareTicket","onLoad","start","setButtonClickEvents","shareNode","addComponent","Label","string","setPosition","node","addChild","CC_WECHATGAME","window","sharedCanvas","undefined","tex","Texture2D","width","height","wx","postMessage","messageType","MAIN_MENU_NUM","gameTypeNode","log","shareButtonFunc","event","playSimpleAudioEngine","setTimeout","sharePicture","backButtonFunc","destroy","_updateSubDomainCanvas","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame","update"],"mappings":"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","sourceRoot":"/","sourcesContent":["var GameConfig = require(\"GameConfig\");\nvar AnimLayerTool = require(\"AnimLayerTool\");\nvar GameTools = require(\"GameTools\");\nvar GameUiTools = require(\"GameUiTools\");\ncc.Class({\n    extends: cc.Component,\n    // name: \"RankingListView\",\n    properties: {\n        backButton: cc.Node,\n        // shareButton: cc.Node,\n        rankingScrollView: cc.Sprite,//显示排行榜\n        shareTicket: null,\n    },\n    onLoad() {\n    },\n    start() {\n        GameUiTools.setButtonClickEvents(this, this.backButton, \"backButtonFunc\");\n        // GameUiTools.setButtonClickEvents(this, this.shareButton, \"shareButtonFunc\");\n        if (this.shareTicket != null) {\n            let shareNode = new cc.Node();\n            shareNode.addComponent(cc.Label).string = \"群排行\";\n            shareNode.setPosition(-260, 503);\n            this.node.addChild(shareNode);\n        }\n        if (CC_WECHATGAME) {\n            if (window.sharedCanvas != undefined) {\n                this.tex = new cc.Texture2D();\n                window.sharedCanvas.width = 720;\n                window.sharedCanvas.height = 1280;\n                // 发消息给子域\n                if (this.shareTicket != null) {\n                    window.wx.postMessage({\n                        messageType: 5,\n                        MAIN_MENU_NUM: GameConfig.MAIN_MENU_NUM,\n                        shareTicket: this.shareTicket\n                    });\n                } else {\n                    window.wx.postMessage({\n                        messageType: 1,\n                        MAIN_MENU_NUM: GameConfig.MAIN_MENU_NUM,\n                    });\n                }\n            }\n        } else {\n            let gameTypeNode = new cc.Node();\n            gameTypeNode.addComponent(cc.Label).string = \"暂无排行榜数据\";\n            this.node.addChild(gameTypeNode);\n            cc.log(\"获取排行榜数据。\" + GameConfig.MAIN_MENU_NUM);\n        }\n    },\n\n    shareButtonFunc: function (event) {\n        GameTools.playSimpleAudioEngine(4);\n        setTimeout(() => {\n            GameTools.sharePicture(\"shareTicket\");\n        }, 100);\n    },\n\n    backButtonFunc: function (event) {\n        GameTools.playSimpleAudioEngine(0);\n        this.node.destroy();\n    },\n\n    // 刷新子域的纹理\n    _updateSubDomainCanvas() {\n        if (CC_WECHATGAME) {\n            if (window.sharedCanvas != undefined) {\n                this.tex.initWithElement(window.sharedCanvas);\n                this.tex.handleLoadedTexture();\n                this.rankingScrollView.spriteFrame = new cc.SpriteFrame(this.tex);\n            }\n        }\n    },\n    update() {\n        this._updateSubDomainCanvas();\n    },\n});\n"]}