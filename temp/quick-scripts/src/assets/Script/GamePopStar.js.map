{"version":3,"sources":["assets\\Script\\GamePopStar.js"],"names":["CardSprite","require","GameConfig","GameData","AnimLayerTool","GameTools","GameUiTools","TAG_card","GamePopStar","cc","Class","Node","properties","firstX","firstY","endX","endY","selectNumber","selectAmount","score","cardArr","firstClickNum","Array","ctor","x","DEVICE_WIDTH","y","DEVICE_HEIGHT","setContentSize","init","i","CAED_LINES","initUI","on","EventType","TOUCH_START","onTouchBegan","createCardSprite","isHaveGameData","score0","j","number","scoreCard0","CardShow","scoreCard2","setVisible","moveButtonAnim","MoveButtonAnimType","up","score1","scoreNum","scoreCard3","scoreCard1","event","touchPoint","touch","getLocation","self","getCurrentTarget","propsMenu","PropsMenu","PropsMenuSpace","GamePopStarProperty","isVisible","getBoundingBoxToWorld","contains","playSimpleAudioEngine","CardClickShow","inspectionSelect","cardVanish","PropsMenuDestroyCard","cardVanishAni","setGamePropNumber","GameScene","PropsMenuExchangeCard","Math","abs","cancelSelect","createMoveAnim","num","getNumber","setNumber","PropsMenuRemoveAcross","z","callFuncPopStarAnim","dt","doDown","doLeft","doCheck","getIsSelect","firstCardI","firstCardJ","deTime","getIsFirstSelect","createPopStarAnim","createScoreMoveAnim","createShowMessageBoxAward","getParent","setGameRewards","scheduleOnce","isdo","y1","x1","card","randomCreateCardNumber","CARD_WIDTH","addChild","random","returnNum","pow","floor","autoCreateCardNumber","setGamePassNum","getGamePassNum","setPassNum","progressBar","scaleX","setScore","saveMemoryInformation","isGameOver","isPassGame","getGamePassScore","gameOver","gamePass","loadingLayer","IS_GAME_OVER","backGame","toastMessage","bestNum","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["var CardSprite = require(\"CardSprite\");\nvar GameConfig = require(\"GameConfig\");\nvar GameData = require(\"GameData\");\nvar AnimLayerTool = require(\"AnimLayerTool\");\nvar GameTools = require(\"GameTools\");\nvar GameUiTools = require(\"GameUiTools\");\nconst TAG_card = 1006;\nvar GamePopStar = cc.Class({\n    extends: cc.Node,\n    properties: {\n        firstX: null,//点击元素\n        firstY: null,//点击元素\n        endX: null,\n        endY: null,\n        selectNumber: 0,//选中数字\n        selectAmount: 0,//选中卡片数\n        score: 0,//分数,\n        cardArr: null,// 储存卡片类\n        firstClickNum: new Array(),//记录交换位置\n    },\n    ctor: function () {\n        this.x = -GameConfig.DEVICE_WIDTH / 2;\n        this.y = -GameConfig.DEVICE_HEIGHT / 2;\n        this.setContentSize(GameConfig.DEVICE_WIDTH * 4, GameConfig.DEVICE_HEIGHT * 4);\n        this.init();\n    },\n    init: function () {\n        this.cardArr = new Array();\n        for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n            this.cardArr[i] = Array();\n        }\n        this.firstClickNum[0] = -1;\n        this.firstClickNum[1] = -1;\n        this.initUI();\n    },\n    initUI() {\n        //设置触摸事件监听\n        this.on(cc.Node.EventType.TOUCH_START, this.onTouchBegan, this);\n\n        this.createCardSprite(); //创建4X4卡片\n        if (GameData.isHaveGameData()) {\n            this.score = GameData.score0;\n            for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n                for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                    this.cardArr[i][j].number = GameData.scoreCard0[i][j];\n                    this.cardArr[i][j].CardShow();\n                    if (GameData.scoreCard2[i][j] == 1) {\n                        this.cardArr[i][j].setVisible(false);\n                    }\n                }\n            }\n        } else {\n            for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n                for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                    AnimLayerTool.moveButtonAnim(this.cardArr[i][j], true, AnimLayerTool.MoveButtonAnimType.up);\n                }\n            }\n            GameData.score0 = 0;\n            GameData.score1 = 0;\n            GameData.scoreNum = 0;\n            this.score = 0;\n            for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n                for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                    GameData.scoreCard3[i][j] = 0;\n                    GameData.scoreCard2[i][j] = 0;\n                    GameData.scoreCard1[i][j] = this.cardArr[i][j].number;\n                    GameData.scoreCard0[i][j] = this.cardArr[i][j].number;\n                }\n            }\n        }\n    },\n    onTouchBegan(event) {\n        //获取触摸的X轴和Y轴\n        let touchPoint = event.touch.getLocation(); //获取OpenGL坐标（即cocos2d-x坐标，原点在左下角）\n        let self = event.getCurrentTarget();\n        if (GameConfig.propsMenu != GameConfig.PropsMenu.PropsMenuSpace) {\n            self.GamePopStarProperty(touchPoint);\n            return false;\n        } else { //碰撞检测\n            if (self.selectAmount == 0) {\n                for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n                    for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                        if (self.cardArr[i][j].isVisible() && self.cardArr[i][j].getBoundingBoxToWorld().contains(touchPoint)) {\n                            GameTools.playSimpleAudioEngine(1);\n                            self.cardArr[i][j].CardClickShow(1);\n                            self.inspectionSelect(i, j);\n                        }\n                    }\n                }\n                self.cardVanish();\n            }\n            return true;\n        }\n    },\n\n//道具模式\n    GamePopStarProperty(touchPoint) {\n        //碰撞检测\n        for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n            for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                if (this.cardArr[i][j].isVisible() && this.cardArr[i][j].getBoundingBoxToWorld().contains(touchPoint)) {\n                    GameTools.playSimpleAudioEngine(0);\n                    if (GameConfig.propsMenu == GameConfig.PropsMenu.PropsMenuDestroyCard) {\n                        this.cardArr[i][j].setVisible(false);\n                        this.cardVanishAni(0);\n                        GameData.setGamePropNumber(0, -1);\n                        GameConfig.GameScene.setGamePropNumber(0);\n                        GameConfig.propsMenu = GameConfig.PropsMenu.PropsMenuSpace;\n                        return;\n                    } else if (GameConfig.propsMenu == GameConfig.PropsMenu.PropsMenuExchangeCard) {\n                        if (this.firstClickNum[0] == -1) {\n                            this.firstClickNum[0] = i;\n                            this.firstClickNum[1] = j;\n                            if (i > 0 && this.cardArr[i - 1][j].isVisible()) {\n                                this.cardArr[i - 1][j].CardClickShow(1);\n                            }\n                            if (i < GameConfig.CAED_LINES - 1 && this.cardArr[i + 1][j].isVisible()) {\n                                this.cardArr[i + 1][j].CardClickShow(1);\n                            }\n                            if (j > 0 && this.cardArr[i][j - 1].isVisible()) {\n                                this.cardArr[i][j - 1].CardClickShow(1);\n                            }\n                            if (j < GameConfig.CAED_LINES - 1 && this.cardArr[i][j + 1].isVisible()) {\n                                this.cardArr[i][j + 1].CardClickShow(1);\n                            }\n                            //AnimLayerTool.createExchangeCardAnim(this.cardArr[i][j], i, j);\n                        } else {\n                            if (((Math.abs(i - this.firstClickNum[0]) == 1) && ((j - this.firstClickNum[1]) == 0))\n                                || (((i - this.firstClickNum[0]) == 0) && (Math.abs(j - this.firstClickNum[1]) == 1))) {\n                                this.cancelSelect();\n                                AnimLayerTool.createMoveAnim(this.cardArr[i][j], this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]], true);\n                                AnimLayerTool.createMoveAnim(this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]], this.cardArr[i][j], true);\n                                let num = this.cardArr[i][j].getNumber();\n                                this.cardArr[i][j].setNumber(\n                                    this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]].getNumber());\n                                this.cardArr[this.firstClickNum[0]][this.firstClickNum[1]].setNumber(\n                                    num);\n                                this.firstClickNum[0] = -1;\n                                this.firstClickNum[1] = -1;\n                                GameData.setGamePropNumber(2, -1);\n                                GameConfig.GameScene.setGamePropNumber(2);\n                                this.cardVanishAni(0); //检测\n                            }\n                            else {\n                                this.firstClickNum[0] = -1;\n                                this.firstClickNum[1] = -1;\n                                this.cancelSelect();\n                            }\n                            GameConfig.propsMenu = GameConfig.PropsMenu.PropsMenuSpace;\n                        }\n                        return;\n                    } else if (GameConfig.propsMenu == GameConfig.PropsMenu.PropsMenuRemoveAcross) {\n                        for (let z = 0; z < GameConfig.CAED_LINES; z++) {\n                            AnimLayerTool.callFuncPopStarAnim(null, this.cardArr[z][j]);\n                            this.cardArr[z][j].setVisible(false);\n                            AnimLayerTool.callFuncPopStarAnim(null, this.cardArr[i][z]);\n                            this.cardArr[i][z].setVisible(false);\n                        }\n                        GameData.setGamePropNumber(1, -1);\n                        GameConfig.GameScene.setGamePropNumber(1);\n                        this.cardVanishAni(0);\n                        GameConfig.propsMenu = GameConfig.PropsMenu.PropsMenuSpace;\n                        return;\n                    }\n                }\n            }\n        }\n        if (this.firstClickNum[0] != -1) {\n            this.cancelSelect();\n            this.firstClickNum[0] = -1;\n            this.firstClickNum[1] = -1;\n        }\n        GameConfig.propsMenu = GameConfig.PropsMenu.PropsMenuSpace;\n    },\n\n    cardVanishAni(dt) {//卡片消失监听动画\n        this.doDown();\n        this.doLeft();\n        this.doCheck(0);\n        this.selectAmount = 0;\n    },\n\n    cancelSelect() {//取消选择\n        for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n            for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                if (this.cardArr[i][j].getIsSelect()) {\n                    this.cardArr[i][j].CardClickShow(0);\n                }\n            }\n        }\n        this.selectAmount = 0;\n    },\n\n    cardVanish() {//卡片消失\n        if (this.selectAmount >= 2) {\n            let firstCardI, firstCardJ;\n            let deTime = 0;\n            for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n                for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                    if (this.cardArr[i][j].getIsFirstSelect()) {\n                        firstCardI = i;\n                        firstCardJ = j;\n                    }\n                    if (this.cardArr[i][j].getIsSelect()) {\n                        this.cardArr[i][j].CardClickShow(0);\n                        //this.cardArr[i][j].setVisible(false);\n                        AnimLayerTool.createPopStarAnim(this.cardArr[i][j], (deTime++) * 0.1);\n                        //AnimLayerTool.callFuncPopStarAnim(this.cardArr[i][j]);\n                    }\n                }\n            }\n\n            this.score = this.score + this.selectAmount * this.selectAmount * 5;\n            AnimLayerTool.createScoreMoveAnim(this.cardArr[firstCardI][firstCardJ], this.selectAmount * this.selectAmount * 5, false);//加分动画\n            AnimLayerTool.createShowMessageBoxAward(this.getParent(), this.selectAmount);//展示奖励对话框\n\n            let scoreNum = GameData.setGameRewards(this.selectNumber); //获取奖励\n            AnimLayerTool.createScoreMoveAnim(this.cardArr[firstCardI][firstCardJ], scoreNum, true);\n            GameUiTools.scheduleOnce(this, this.cardVanishAni, deTime * 0.1);\n            //this.cardVanishAni(0);\n        }\n        else {\n            this.cancelSelect();\n        }\n        return false;\n    },\n//选择点中卡片\n    inspectionSelect(i, j) {\n        this.cardArr[i][j].CardClickShow(2);\n        this.selectAmount++;\n        this.selectNumber = this.cardArr[i][j].getNumber();\n        if (i >= 1 && this.cardArr[i - 1][j].isVisible() && !this.cardArr[i - 1][j].getIsSelect()) {\n            if (this.selectNumber == this.cardArr[i - 1][j].getNumber()) {\n                this.inspectionSelect(i - 1, j);\n            }\n        }\n        if (j < GameConfig.CAED_LINES - 1 && this.cardArr[i][j + 1].isVisible()\n            && !this.cardArr[i][j + 1].getIsSelect()) {\n            if (this.selectNumber == this.cardArr[i][j + 1].getNumber()) {\n                this.inspectionSelect(i, j + 1);\n            }\n        }\n        if (i < GameConfig.CAED_LINES - 1 && this.cardArr[i + 1][j].isVisible()\n            && !this.cardArr[i + 1][j].getIsSelect()) {\n            if (this.selectNumber == this.cardArr[i + 1][j].getNumber()) {\n                this.inspectionSelect(i + 1, j);\n            }\n        }\n        if (j >= 1 && this.cardArr[i][j - 1].isVisible()\n            && !this.cardArr[i][j - 1].getIsSelect()) {\n            if (this.selectNumber == this.cardArr[i][j - 1].getNumber()) {\n                this.inspectionSelect(i, j - 1);\n            }\n        }\n    },\n    doDown() {\n        let isdo = false;\n        for (let x = 0; x < GameConfig.CAED_LINES; x++) {\n            for (let y = 0; y < GameConfig.CAED_LINES; y++) {\n                for (let y1 = y + 1; y1 < GameConfig.CAED_LINES; y1++) {\n                    if (this.cardArr[x][y1].isVisible()) {\n                        if (!this.cardArr[x][y].isVisible()) {\n                            AnimLayerTool.createMoveAnim(this.cardArr[x][y1], this.cardArr[x][y], false);\n                            this.cardArr[x][y].setNumber(this.cardArr[x][y1].getNumber());\n                            this.cardArr[x][y].setVisible(true);\n                            this.cardArr[x][y1].setVisible(false);\n                            this.cardArr[x][y1].CardShow();\n                            y--;\n                            isdo = true;\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n        return isdo;\n    },\n    doLeft() {\n        let isdo = false;\n        for (let x = 0; x < GameConfig.CAED_LINES; x++) {\n            for (let x1 = x + 1; x1 < GameConfig.CAED_LINES; x1++) {\n                if (this.cardArr[x1][0].isVisible()) {\n                    if (!this.cardArr[x][0].isVisible()) {\n                        for (let y = 0; y < GameConfig.CAED_LINES; y++) {\n                            if (this.cardArr[x1][y].isVisible()) {\n                                AnimLayerTool.createMoveAnim(this.cardArr[x1][y], this.cardArr[x][y], false);\n                            }\n                            this.cardArr[x][y].setNumber(this.cardArr[x1][y].getNumber());\n                            this.cardArr[x][y].setVisible(this.cardArr[x1][y].isVisible());\n                            this.cardArr[x1][y].setVisible(false);\n                            this.cardArr[x1][y].CardShow();\n                        }\n                        x--;\n                        isdo = true;\n                    }\n                    break;\n                }\n            }\n        }\n        return isdo;\n    },\n    //根据屏幕大小创建卡片\n    createCardSprite() {\n        for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n            for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                let card = CardSprite.createCardSprite(this.randomCreateCardNumber(),\n                    GameConfig.CARD_WIDTH * i + GameConfig.DEVICE_WIDTH / 20.0 + GameConfig.CARD_WIDTH / 2.0,\n                    GameConfig.CARD_WIDTH * j + GameConfig.DEVICE_HEIGHT / 8.0);\n                this.cardArr[i][j] = card;\n                // this.addChild(card, i, j);\n                //版本调整\n                this.addChild(card);\n            }\n        }\n    },\n    //随机产生数字\n    randomCreateCardNumber() {\n        // let num = cc.random0To1() * 5;\n        let num = Math.random() * 5;\n        let returnNum = Math.pow(2, (Math.floor(num) + 1));\n        return returnNum;\n    },\n    //自动生成卡片\n    autoCreateCardNumber(dt) {\n        // this.removeChildByTag(TAG_passSprit);\n        for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n            for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                this.cardArr[i][j].setVisible(true);\n                this.cardArr[i][j].setNumber(this.randomCreateCardNumber());\n                this.cardArr[i][j].CardShow();\n                AnimLayerTool.moveButtonAnim(this.cardArr[i][j], true, AnimLayerTool.MoveButtonAnimType.up);\n            }\n        }\n        GameData.setGamePassNum(GameData.getGamePassNum() + 1);\n        GameConfig.GameScene.setPassNum();\n        GameConfig.GameScene.progressBar.scaleX = 0;\n        GameUiTools.scheduleOnce(this, this.doCheck, 0.15);\n    },\n    setScore() {\n        GameConfig.GameScene.setScore(this.score);\n    },\n    doCheck(dt) {\n        this.saveMemoryInformation(); //保存临时信息\n        //this.setScore(score);\n        let isGameOver = true;\n        let isPassGame = true;\n        for (let y = 0; y < GameConfig.CAED_LINES; y++) {\n            for (let x = 0; x < GameConfig.CAED_LINES; x++) {\n                if (this.cardArr[x][y].isVisible()) {\n                    if (x < GameConfig.CAED_LINES - 1 && this.cardArr[x + 1][y].isVisible()\n                        && (this.cardArr[x + 1][y].getNumber() == this.cardArr[x][y].getNumber())) {\n                        isPassGame = false;\n                        break;\n                    }\n                    if (y < GameConfig.CAED_LINES - 1 && this.cardArr[x][y + 1].isVisible()\n                        && (this.cardArr[x][y + 1].getNumber() == this.cardArr[x][y].getNumber())) {\n                        isPassGame = false;\n                        break;\n                    }\n                } else {\n                    isGameOver = false;\n                }\n            }\n        }\n        if (isPassGame) {\n            let deTime = 0;\n            for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n                for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                    if (this.cardArr[i][j].isVisible()) {\n                        if (deTime < 5) {\n                            AnimLayerTool.createPopStarAnim(this.cardArr[i][j], (++deTime) * 0.5);\n                        }\n                        else {\n                            AnimLayerTool.createPopStarAnim(this.cardArr[i][j], deTime * 0.5);\n                        }\n\n                    }\n                }\n            }\n            if (deTime < 5) {\n                this.score = this.score + (5 - deTime) * (5 - deTime) * 5;\n                AnimLayerTool.createScoreMoveAnim(this.cardArr[2][2], (5 - deTime) * (5 - deTime) * 5, false);//加分动画\n            }\n            if (this.score < GameData.getGamePassScore()) {\n                GameUiTools.scheduleOnce(this, this.gameOver, 1 + deTime * 0.5);\n            } else {\n                AnimLayerTool.createShowMessageBoxAward(this.getParent(), -1);\n                // GameUiTools.scheduleOnce(this, this.autoCreateCardNumber, 1 + deTime * 0.5);\n                GameUiTools.scheduleOnce(this, this.gamePass, 1 + deTime * 0.5);\n            }\n        }\n    },\n\n    gamePass() {\n        GameUiTools.loadingLayer(\"panel/GamePass\");\n    },\n\n    gameOver(dt)//游戏结束\n    {\n        GameConfig.IS_GAME_OVER = true;\n        GameUiTools.loadingLayer(\"panel/GameOver\");\n        // cc.loader.loadRes(\"panel/GameOver\", (err, prefab) => {\n        //     let node = cc.instantiate(prefab);\n        //     GameConfig.GameScene.node.addChild(node);\n        // });\n    },\n\n    /**\n     *撤销游戏\n     */\n    backGame() {\n        if (GameData.scoreNum == 1) {\n            for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n                for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                    this.cardArr[i][j].setNumber(GameData.scoreCard1[i][j]);\n                    this.cardArr[i][j].CardShow();\n                    if (GameData.scoreCard3[i][j] == 1) {\n                        this.cardArr[i][j].setVisible(false);\n                    } else {\n                        this.cardArr[i][j].setVisible(true);\n                    }\n                }\n            }\n            this.score = GameData.score1;\n            GameData.scoreNum = 0;\n            GameData.score0 = GameData.score1;\n            for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n                for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                    GameData.scoreCard2[i][j] = GameData.scoreCard3[i][j];\n                    GameData.scoreCard0[i][j] = GameData.scoreCard1[i][j];\n                }\n            }\n            this.setScore();\n        } else {\n            GameTools.toastMessage(4);\n        }\n    },\n\n    saveMemoryInformation() {\n        if (GameData.scoreNum == 0) {\n            GameData.scoreNum = 1;\n        }\n        GameData.score1 = GameData.score0;\n        GameData.score0 = this.score;\n        for (let i = 0; i < GameConfig.CAED_LINES; i++) {\n            for (let j = 0; j < GameConfig.CAED_LINES; j++) {\n                GameData.scoreCard3[i][j] = GameData.scoreCard2[i][j];\n                GameData.scoreCard2[i][j] = (this.cardArr[i][j].isVisible() ? 0 : 1);\n                GameData.scoreCard1[i][j] = GameData.scoreCard0[i][j];\n                GameData.scoreCard0[i][j] = this.cardArr[i][j].getNumber();\n                GameData.bestNum = GameData.bestNum > this.cardArr[i][j].getNumber() ? GameData.bestNum : this.cardArr[i][j].getNumber();\n            }\n        }\n    }\n});\n\nmodule.exports = GamePopStar;\n"]}