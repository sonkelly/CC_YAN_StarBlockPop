{"version":3,"sources":["assets\\Script\\GameScene.js"],"names":["GamePopStar","require","GameData","GameTools","GameUiTools","GameConfig","AnimLayerTool","GameScene","cc","Class","Component","properties","layerBack","Sprite","backButton","Node","cardNumberTTF","Label","bestScoreTTF","progressBar","passNumTTF","propMenu","currentScore","isAddScore","gameLogicLayer","ctor","playBackgroundMusic","onLoad","GameLogic","addChild","score0","string","getGamePassScore","getGamePassNum","setButtonClickEvents","start","backButtonFunc","event","playSimpleAudioEngine","loadingResource","functionMenuTouchFunc","button","target","getGamePropNumber","propsMenu","PropsMenu","PropsMenuDestroyCard","showGamePropHelp","PropsMenuSpace","PropsMenuRemoveAcross","PropsMenuExchangeCard","propType","loader","loadRes","err","prefab","node","instantiate","getComponent","setPropType","director","getScene","children","setGamePropNumber","setScore","score","heightScore","scaleX","update","dt","setPassNum","stopBackgroundMusic","loadingSceneType","LoadingSceneType","LoadingSceneBackGame","loadScene"],"mappings":";;;;;;AAAA,IAAIA,WAAW,GAAGC,OAAO,CAAC,aAAD,CAAzB;;AACA,IAAIC,QAAQ,GAAGD,OAAO,CAAC,UAAD,CAAtB;;AACA,IAAIE,SAAS,GAAGF,OAAO,CAAC,WAAD,CAAvB;;AACA,IAAIG,WAAW,GAAGH,OAAO,CAAC,aAAD,CAAzB;;AACA,IAAII,UAAU,GAAGJ,OAAO,CAAC,YAAD,CAAxB;;AACA,IAAIK,aAAa,GAAGL,OAAO,CAAC,eAAD,CAA3B;;AACA,IAAIM,SAAS,GAAGC,EAAE,CAACC,KAAH,CAAS;AACrB,aAASD,EAAE,CAACE,SADS;AAErBC,EAAAA,UAAU,EAAE;AACRC,IAAAA,SAAS,EAAEJ,EAAE,CAACK,MADN;AAERC,IAAAA,UAAU,EAAEN,EAAE,CAACO,IAFP;AAEa;AACrBC,IAAAA,aAAa,EAAER,EAAE,CAACS,KAHV;AAGgB;AACxBC,IAAAA,YAAY,EAAEV,EAAE,CAACS,KAJT;AAIe;AACvBE,IAAAA,WAAW,EAAEX,EAAE,CAACO,IALR;AAKa;AACrBK,IAAAA,UAAU,EAAEZ,EAAE,CAACS,KANP;AAMa;AACrBI,IAAAA,QAAQ,EAAE,CAACb,EAAE,CAACO,IAAJ,CAPF;AAOY;AAEpBO,IAAAA,YAAY,EAAE,CATN;AASQ;AAChBC,IAAAA,UAAU,EAAE,KAVJ;AAUU;AAElBC,IAAAA,cAAc,EAAEhB,EAAE,CAACO;AAZX,GAFS;AAgBrBU,EAAAA,IAAI,EAAE,gBAAY;AACdpB,IAAAA,UAAU,CAACE,SAAX,GAAuB,IAAvB;AACAJ,IAAAA,SAAS,CAACuB,mBAAV;AACH,GAnBoB;AAoBrBC,EAAAA,MAAM,EAAE,kBAAY;AAChBtB,IAAAA,UAAU,CAACuB,SAAX,GAAuB,IAAI5B,WAAJ,EAAvB;AACA,SAAKwB,cAAL,CAAoBK,QAApB,CAA6BxB,UAAU,CAACuB,SAAxC;AAEA,SAAKN,YAAL,GAAoBpB,QAAQ,CAAC4B,MAA7B;AACA,SAAKd,aAAL,CAAmBe,MAAnB,GAA4B7B,QAAQ,CAAC4B,MAArC;AACA,SAAKZ,YAAL,CAAkBa,MAAlB,GAA2B7B,QAAQ,CAAC8B,gBAAT,EAA3B;AACA,SAAKZ,UAAL,CAAgBW,MAAhB,GAAyB,OAAO7B,QAAQ,CAAC+B,cAAT,EAAP,GAAmC,IAA5D;AACA7B,IAAAA,WAAW,CAAC8B,oBAAZ,CAAiC,IAAjC,EAAuC,KAAKpB,UAA5C,EAAwD,gBAAxD;AACAV,IAAAA,WAAW,CAAC8B,oBAAZ,CAAiC,IAAjC,EAAuC,KAAKb,QAA5C,EAAsD,uBAAtD;AACH,GA9BoB;AA+BrBc,EAAAA,KA/BqB,mBA+Bb,CACP,CAhCoB;AAiCrBC,EAAAA,cAAc,EAAE,wBAAUC,KAAV,EAAiB;AAC7BlC,IAAAA,SAAS,CAACmC,qBAAV,CAAgC,CAAhC;AACA,SAAKC,eAAL;AACH,GApCoB;AAqCrBC,EAAAA,qBAAqB,EAAE,+BAAUH,KAAV,EAAiB;AACpClC,IAAAA,SAAS,CAACmC,qBAAV,CAAgC,CAAhC;AACA,QAAIG,MAAM,GAAGJ,KAAK,CAACK,MAAnB;;AACA,QAAI,KAAKrB,QAAL,CAAc,CAAd,KAAoBoB,MAAxB,EAAgC;AAC5B,UAAIvC,QAAQ,CAACyC,iBAAT,CAA2B,CAA3B,KAAiC,CAArC,EAAwC;AACpCtC,QAAAA,UAAU,CAACuC,SAAX,GAAuBvC,UAAU,CAACwC,SAAX,CAAqBC,oBAA5C;AACH,OAFD,MAEO;AACH,aAAKC,gBAAL,CAAsB,CAAtB;AACA1C,QAAAA,UAAU,CAACuC,SAAX,GAAuBvC,UAAU,CAACwC,SAAX,CAAqBG,cAA5C;AACH;AACJ,KAPD,MAOO,IAAI,KAAK3B,QAAL,CAAc,CAAd,KAAoBoB,MAAxB,EAAgC;AACnC,UAAIvC,QAAQ,CAACyC,iBAAT,CAA2B,CAA3B,KAAiC,CAArC,EAAwC;AACpCtC,QAAAA,UAAU,CAACuC,SAAX,GAAuBvC,UAAU,CAACwC,SAAX,CAAqBI,qBAA5C;AACH,OAFD,MAEO;AACH,aAAKF,gBAAL,CAAsB,CAAtB;AACA1C,QAAAA,UAAU,CAACuC,SAAX,GAAuBvC,UAAU,CAACwC,SAAX,CAAqBG,cAA5C;AACH;AACJ,KAPM,MAOA,IAAI,KAAK3B,QAAL,CAAc,CAAd,KAAoBoB,MAAxB,EAAgC;AACnC,UAAIvC,QAAQ,CAACyC,iBAAT,CAA2B,CAA3B,KAAiC,CAArC,EAAwC;AACpCtC,QAAAA,UAAU,CAACuC,SAAX,GAAuBvC,UAAU,CAACwC,SAAX,CAAqBK,qBAA5C;AACH,OAFD,MAEO;AACH,aAAKH,gBAAL,CAAsB,CAAtB;AACA1C,QAAAA,UAAU,CAACuC,SAAX,GAAuBvC,UAAU,CAACwC,SAAX,CAAqBG,cAA5C;AACH;AACJ,KAPM,MAOA;AACH3C,MAAAA,UAAU,CAACuC,SAAX,GAAuBvC,UAAU,CAACwC,SAAX,CAAqBG,cAA5C;AACH;AACJ,GAhEoB;AAiErBD,EAAAA,gBAjEqB,4BAiEJI,QAjEI,EAiEM;AACvB3C,IAAAA,EAAE,CAAC4C,MAAH,CAAUC,OAAV,CAAkB,oBAAlB,EAAwC,UAACC,GAAD,EAAMC,MAAN,EAAiB;AACrD,UAAIC,IAAI,GAAGhD,EAAE,CAACiD,WAAH,CAAeF,MAAf,CAAX;AACAC,MAAAA,IAAI,CAACE,YAAL,CAAkB,cAAlB,EAAkCC,WAAlC,CAA8CR,QAA9C;AACA3C,MAAAA,EAAE,CAACoD,QAAH,CAAYC,QAAZ,GAAuBC,QAAvB,CAAgC,CAAhC,EAAmCjC,QAAnC,CAA4C2B,IAA5C;AACH,KAJD;AAKH,GAvEoB;AAwErBO,EAAAA,iBAxEqB,6BAwEHZ,QAxEG,EAwEO;AACxB,SAAK9B,QAAL,CAAc8B,QAAd,EAAwBO,YAAxB,CAAqC,cAArC,EAAqDC,WAArD;AACH,GA1EoB;AA2ErBK,EAAAA,QAAQ,EAAE,kBAAUC,KAAV,EAAiB;AACvB,QAAI,KAAK3C,YAAL,GAAoB2C,KAAxB,EAA+B;AAC3B,WAAK3C,YAAL,GAAoB2C,KAApB;AACA,WAAKjD,aAAL,CAAmBe,MAAnB,GAA4B,KAAKT,YAAjC;AACH,KAHD,MAGO;AACH,WAAKC,UAAL,GAAkB,IAAlB;AACH;;AACD,QAAI0C,KAAK,GAAG/D,QAAQ,CAACgE,WAArB,EAAkC;AAC9BhE,MAAAA,QAAQ,CAACgE,WAAT,GAAuBD,KAAvB;AAEH;;AACD,SAAK9C,WAAL,CAAiBgD,MAAjB,GAA0BF,KAAK,GAAI/D,QAAQ,CAAC8B,gBAAT,EAAT,GAAwC,GAAlE;;AACA,QAAI,KAAKb,WAAL,CAAiBgD,MAAjB,GAA0B,GAA9B,EAAmC;AAC/B,WAAKhD,WAAL,CAAiBgD,MAAjB,GAA0B,GAA1B;AACH;AACJ,GA1FoB;AA2FrBC,EAAAA,MAAM,EAAE,gBAAUC,EAAV,EAAc;AAClB,QAAI,KAAK9C,UAAL,IAAmB,KAAKD,YAAL,IAAqBpB,QAAQ,CAAC4B,MAArD,EAA6D;AACzD,WAAKd,aAAL,CAAmBe,MAAnB,GAA4B,KAAKT,YAAL,EAA5B;AACA,WAAKA,YAAL;AACH,KAHD,MAGO;AACH,WAAKC,UAAL,GAAkB,KAAlB;AACH;AACJ,GAlGoB;AAmGrB+C,EAAAA,UAnGqB,wBAmGR;AACT,SAAKlD,UAAL,CAAgBW,MAAhB,GAAyB,OAAO7B,QAAQ,CAAC+B,cAAT,EAAP,GAAmC,IAA5D;AACA,SAAKf,YAAL,CAAkBa,MAAlB,GAA2B7B,QAAQ,CAAC8B,gBAAT,EAA3B;AACH,GAtGoB;AAuGrBO,EAAAA,eAAe,EAAE,2BAAY;AACzBpC,IAAAA,SAAS,CAACoE,mBAAV;AACAlE,IAAAA,UAAU,CAACmE,gBAAX,GAA8BnE,UAAU,CAACoE,gBAAX,CAA4BC,oBAA1D;AACAlE,IAAAA,EAAE,CAACoD,QAAH,CAAYe,SAAZ,CAAsB,cAAtB;AACH,GA3GoB,CA2GnB;AACN;;AA5GyB,CAAT,CAAhB","sourceRoot":"/","sourcesContent":["var GamePopStar = require(\"GamePopStar\");\nvar GameData = require(\"GameData\");\nvar GameTools = require(\"GameTools\");\nvar GameUiTools = require(\"GameUiTools\");\nvar GameConfig = require(\"GameConfig\");\nvar AnimLayerTool = require(\"AnimLayerTool\");\nvar GameScene = cc.Class({\n    extends: cc.Component,\n    properties: {\n        layerBack: cc.Sprite,\n        backButton: cc.Node, //返回按钮\n        cardNumberTTF: cc.Label,// 显示分数控件\n        bestScoreTTF: cc.Label,// 显示最高分数控件\n        progressBar: cc.Node,//进度条\n        passNumTTF: cc.Label,//关数\n        propMenu: [cc.Node],//道具按钮\n\n        currentScore: 0,//当前得分\n        isAddScore: false,//是否加分\n\n        gameLogicLayer: cc.Node,\n    },\n    ctor: function () {\n        GameConfig.GameScene = this;\n        GameTools.playBackgroundMusic();\n    },\n    onLoad: function () {\n        GameConfig.GameLogic = new GamePopStar();\n        this.gameLogicLayer.addChild(GameConfig.GameLogic);\n\n        this.currentScore = GameData.score0;\n        this.cardNumberTTF.string = GameData.score0;\n        this.bestScoreTTF.string = GameData.getGamePassScore();\n        this.passNumTTF.string = \"第 \" + GameData.getGamePassNum() + \" 关\";\n        GameUiTools.setButtonClickEvents(this, this.backButton, \"backButtonFunc\");\n        GameUiTools.setButtonClickEvents(this, this.propMenu, \"functionMenuTouchFunc\");\n    },\n    start() {\n    },\n    backButtonFunc: function (event) {\n        GameTools.playSimpleAudioEngine(0);\n        this.loadingResource();\n    },\n    functionMenuTouchFunc: function (event) {\n        GameTools.playSimpleAudioEngine(0);\n        let button = event.target;\n        if (this.propMenu[0] == button) {\n            if (GameData.getGamePropNumber(0) >= 1) {\n                GameConfig.propsMenu = GameConfig.PropsMenu.PropsMenuDestroyCard;\n            } else {\n                this.showGamePropHelp(0);\n                GameConfig.propsMenu = GameConfig.PropsMenu.PropsMenuSpace;\n            }\n        } else if (this.propMenu[1] == button) {\n            if (GameData.getGamePropNumber(1) >= 1) {\n                GameConfig.propsMenu = GameConfig.PropsMenu.PropsMenuRemoveAcross;\n            } else {\n                this.showGamePropHelp(1);\n                GameConfig.propsMenu = GameConfig.PropsMenu.PropsMenuSpace;\n            }\n        } else if (this.propMenu[2] == button) {\n            if (GameData.getGamePropNumber(2) >= 1) {\n                GameConfig.propsMenu = GameConfig.PropsMenu.PropsMenuExchangeCard;\n            } else {\n                this.showGamePropHelp(2);\n                GameConfig.propsMenu = GameConfig.PropsMenu.PropsMenuSpace;\n            }\n        } else {\n            GameConfig.propsMenu = GameConfig.PropsMenu.PropsMenuSpace;\n        }\n    },\n    showGamePropHelp(propType) {\n        cc.loader.loadRes(\"panel/GamePropHelp\", (err, prefab) => {\n            let node = cc.instantiate(prefab);\n            node.getComponent(\"GamePropHelp\").setPropType(propType);\n            cc.director.getScene().children[0].addChild(node);\n        });\n    },\n    setGamePropNumber(propType) {\n        this.propMenu[propType].getComponent(\"GamePropNode\").setPropType();\n    },\n    setScore: function (score) {\n        if (this.currentScore > score) {\n            this.currentScore = score;\n            this.cardNumberTTF.string = this.currentScore;\n        } else {\n            this.isAddScore = true;\n        }\n        if (score > GameData.heightScore) {\n            GameData.heightScore = score;\n\n        }\n        this.progressBar.scaleX = score / (GameData.getGamePassScore()) * 0.8;\n        if (this.progressBar.scaleX > 0.9) {\n            this.progressBar.scaleX = 0.9;\n        }\n    },\n    update: function (dt) {\n        if (this.isAddScore && this.currentScore <= GameData.score0) {\n            this.cardNumberTTF.string = this.currentScore++;\n            this.currentScore++;\n        } else {\n            this.isAddScore = false;\n        }\n    },\n    setPassNum() {\n        this.passNumTTF.string = \"第 \" + GameData.getGamePassNum() + \" 关\";\n        this.bestScoreTTF.string = GameData.getGamePassScore();\n    },\n    loadingResource: function () {\n        GameTools.stopBackgroundMusic();\n        GameConfig.loadingSceneType = GameConfig.LoadingSceneType.LoadingSceneBackGame;\n        cc.director.loadScene(\"LoadingScene\");\n    },//特价9.9元一套cocoscreator代码联系Q2483367084 \n//截图 链接：https://share.weiyun.com/leGAHpnB 密码：b9udtv\n});"]}